using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Divuvina.Controllers
{
    public class QuanLyNhanVienController : Controller
    {
        Models.dbContext _db = new Models.dbContext();
        // GET: QuanLyNhanVien

        public ActionResult Index()
        {
            return View();
        }
        public ActionResult DanhMucLoaiHopDong()
        {
            return View();
        }
        public JsonResult GetDataDanhMucLoaiHopDong()
        {
            var rs = _db.LoaiHopDongs.Select(r=>new { Key = r.LoaiHopDongKey, r.Ten, r.DienGiai, r.GhiChu }).OrderBy(r=>r.Ten);
            return Json(rs, JsonRequestBehavior.AllowGet);
            //return Json(new { employee = rs }, JsonRequestBehavior.AllowGet);
        }

        [HttpPost]
        public JsonResult DeleteDanhMucLoaiHopDong(long Key)
        {
            try
            {
                //System.Threading.Thread.Sleep(6000);
                
                var row = _db.LoaiHopDongs.FirstOrDefault(r => r.LoaiHopDongKey == Key);
                if (row != null)
                {
                    _db.LoaiHopDongs.Remove(row);
                    _db.SaveChanges();
                }

                return Json(true, JsonRequestBehavior.AllowGet);
            }
            catch (Exception)
            {
                return Json(false, JsonRequestBehavior.AllowGet);
            }
        }
    }
}